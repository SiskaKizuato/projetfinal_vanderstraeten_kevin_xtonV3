{% extends 'baseBack.html' %}
{% load static %}
{% block content %}

    <!-- Start Page Title -->
    <div class="page-title-area">
        <div class="container">
            <div class="page-title-content">
                <h2>Products Back</h2>
                <ul>
                    <li><a href="{% url 'index' %}">Home</a></li>
                    <li>Products</li>
                </ul>
            </div>
        </div>
    </div>
    <!-- End Page Title -->

    <!-- Start Products Area -->
    <section class="products-area pt-100 pb-70">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-12">
                    <div class="woocommerce-widget-area">

                        <div class="woocommerce-widget collections-list-widget">
                            <h3 class="woocommerce-widget-title">Collections</h3>

                            <ul class="collections-list-row">
                                <li><a href="#" class="category-link default-sex {% if selected_sex == 'Both' %}active{% endif %}" data-sex="Both">Both</a></li>
                                {% for category in categories %}
                                    {% if forloop.counter == 3 %}
                                        <br>
                                        <li><a href="#" class="category-link default-type {% if selected_type == 'All' %}active{% endif %}" data-type="All">All</a></li>
                                    {% endif %}
                                    <li>
                                        {% if forloop.counter < 3 %}
                                            <a href="#" class="category-link sex-link {% if selected_sex == category.name %}active{% endif %}">{{ category.name }}</a>
                                        {% else %}
                                            <a href="#" class="category-link type-link {% if selected_type == category.name %}active{% endif %}">{{ category.name }}</a>
                                        {% endif %}
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>

                        <div class="woocommerce-widget collections-list-widget">
                            <h3 class="woocommerce-widget-title">Partners</h3>

                            <ul class="collections-list-row">
                                <li><a href="#" class="category-link default-partner {% if selected_partner == 'All' %}active{% endif %}" data-partner="All">All</a></li>
                                {% for partner in partners %}
                                <li><a href="#" class="category-link partner-link {% if selected_partner == partner.name %}active{% endif %}" data-partner="{{ partner.name }}">{{ partner.name }}</a></li>
                                {% endfor %}
                            </ul>
                        </div>

                        <div class="woocommerce-widget price-list-widget">
                            <h3 class="woocommerce-widget-title">Price</h3>

                            <div class="collection-filter-by-price">
                                <input class="js-range-of-price" type="text" data-min="0" data-max="1055"
                                    name="filter_by_price" data-step="10">
                            </div>
                        </div>

                        <div class="woocommerce-widget size-list-widget">
                            <h3 class="woocommerce-widget-title">Size</h3>

                            <ul class="size-list-row">
                                <li class="category-link size-link default-size active"><a class="" data-size="ALL" href="#">ALL</a></li>
                                <li class="category-link size-link"><a class="" data-size="XS" href="#">XS</a></li>
                                <li class="category-link size-link"><a class="" data-size="S" href="#">S</a></li>
                                <li class="category-link size-link"><a class="" data-size="M" href="#">M</a></li>
                                <li class="category-link size-link"><a class="" data-size="L" href="#">L</a></li>
                                <li class="category-link size-link"><a class="" data-size="XL" href="#">XL</a></li>
                            </ul>                    
                        </div>
                    </div>
                </div>

                <div class="col-lg-8 col-md-12">
                    <div class="products-filter-options">
                        <div class="row align-items-center">
                            <div class="containerLinkAddBlog">
                                <a href="{% url 'new_product' %}">+ | Add A Product</a>
                            </div>
                            <div class="col-lg-4 col-md-4">
                                
                                <div class="d-lg-flex d-md-flex align-items-center">
                                    <span class="sub-title d-lg-none"><a href="#" data-bs-toggle="modal"
                                            data-bs-target="#productsFilterModal"><i class='bx bx-filter-alt'></i>
                                            Filter</a></span>

                                    <span class="sub-title d-none d-lg-block d-md-block">View:</span>

                                    <div class="view-list-row d-none d-lg-block d-md-block">
                                        <div class="view-column">
                                            <a href="#" class="icon-view-one">
                                                <span></span>
                                            </a>

                                            <a href="#" class="icon-view-two active">
                                                <span></span>
                                                <span></span>
                                            </a>

                                            <a href="#" class="icon-view-three">
                                                <span></span>
                                                <span></span>
                                                <span></span>
                                            </a>

                                            <a href="#" class="view-grid-switch">
                                                <span></span>
                                                <span></span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-4 col-md-4">
                                <p>Showing 1 – 18 of 100</p>
                            </div>

                            <div class="col-lg-4 col-md-4">
                                <div class="products-ordering-list">
                                    <select>
                                        <option>Sort by Price: Low to High</option>
                                        <option>Default Sorting</option>
                                        <option>Sort by Popularity</option>
                                        <option>Sort by Average Rating</option>
                                        <option>Sort by Latest</option>
                                        <option>Sort by Price: High to Low</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="products-collections-filter" class="row">
                        {% for product in products %}
                        <div class="col-lg-6 col-md-6 col-sm-6 products-col-item">
                            <div class="products-box" data-product-id="{{ product.id }}">
                                <div class="products-image">
                                    <a href="#">
                                        <img src="{{product.image1.url }}" class="main-image" alt="image" />
                                        <img src="{{product.image1.url }}" class="hover-image" alt="image" />
                                    </a>

                                    <div class="products-button">
                                        <ul>
                                            <li>
                                                <div class="wishlist-btn">
                                                    <a href="#">
                                                        <i class='bx bx-heart'></i>
                                                        <span class="tooltip-label">Add to Wishlist</span>
                                                    </a>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="compare-btn">
                                                    <a href="#">
                                                        <i class='bx bx-refresh'></i>
                                                        <span class="tooltip-label">Compare</span>
                                                    </a>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="quick-view-btn">
                                                    <a href="#" data-bs-toggle="modal"
                                                        data-bs-target="#productsQuickView{{product.id}}">
                                                        <i class='bx bx-search-alt'></i>
                                                        <span class="tooltip-label">Quick View</span>
                                                    </a>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="products-content">
                                    <span class="category">{{product.category}}</span>
                                    <h3><a href="#">{{product.name}}</a></h3>

                                    <div class="star-rating">
                                        <i class='bx bxs-star'></i>
                                        <i class='bx bxs-star'></i>
                                        <i class='bx bxs-star'></i>
                                        <i class='bx bxs-star'></i>
                                        <i class='bx bxs-star'></i>
                                    </div>
                                    {% if product.promo > 0 %}
                                        <div class="price">
                                            <span class="old-price">$ {{ product.price }} </span>
                                            <span class="new-price">$ {{ product.get_discounted_price }} </span>
                                        </div>
                                    {% else %}
                                        <div class="price">
                                            <span class="new-price">$ {{ product.price }} </span>
                                        </div>
                                    {% endif %}
                                    <a href="#" class="add-to-cart">Add to Cart</a>
                                </div>

                                {% if product.promo > 0 %}
                                <span class="products-discount">
                                    <span>
                                        {{product.promo}}% OFF
                                    </span>
                                </span>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}

                    </div>

                    <div class="pagination-area text-center">
                        <a href="#" class="prev page-numbers"><i class='bx bx-chevron-left'></i></a>
                        <span class="page-numbers current" aria-current="page">1</span>
                        <a href="#" class="page-numbers">2</a>
                        <a href="#" class="page-numbers">3</a>
                        <a href="#" class="page-numbers">4</a>
                        <a href="#" class="page-numbers">5</a>
                        <a href="#" class="next page-numbers"><i class='bx bx-chevron-right'></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End Products Area -->

    <!-- Start Facility Area -->
    <section class="facility-area pb-70">
        <div class="container">
            <div class="facility-slides owl-carousel owl-theme">
                <div class="single-facility-box">
                    <div class="icon">
                        <i class='flaticon-tracking'></i>
                    </div>
                    <h3>Free Shipping Worldwide</h3>
                </div>

                <div class="single-facility-box">
                    <div class="icon">
                        <i class='flaticon-return'></i>
                    </div>
                    <h3>Easy Return Policy</h3>
                </div>

                <div class="single-facility-box">
                    <div class="icon">
                        <i class='flaticon-shuffle'></i>
                    </div>
                    <h3>7 Day Exchange Policy</h3>
                </div>

                <div class="single-facility-box">
                    <div class="icon">
                        <i class='flaticon-sale'></i>
                    </div>
                    <h3>Weekend Discount Coupon</h3>
                </div>

                <div class="single-facility-box">
                    <div class="icon">
                        <i class='flaticon-credit-card'></i>
                    </div>
                    <h3>Secure Payment Methods</h3>
                </div>

                <div class="single-facility-box">
                    <div class="icon">
                        <i class='flaticon-location'></i>
                    </div>
                    <h3>Track Your Package</h3>
                </div>

                <div class="single-facility-box">
                    <div class="icon">
                        <i class='flaticon-customer-service'></i>
                    </div>
                    <h3>24/7 Customer Support</h3>
                </div>
            </div>
        </div>
    </section>
    <!-- End Facility Area -->
    
    <script>
        // Récupérer tous les liens de sexe et de type d'articles
        const sexLinks = document.querySelectorAll('.sex-link');
        const typeLinks = document.querySelectorAll('.type-link');
        const defaultSexLink = document.querySelector('.default-sex');
        const defaultTypeLink = document.querySelector('.default-type');
    
        // Fonction pour désactiver le Both et activer le sexe correspondant
        function toggleSexLink(link) {
            sexLinks.forEach(link => {
                link.classList.remove('active');
            });
            defaultSexLink.classList.remove('active');
            link.classList.add('active');
        }
    
        // Fonction pour désactiver le All et activer le type correspondant
        function toggleTypeLink(link) {
            typeLinks.forEach(link => {
                link.classList.remove('active');
            });
            defaultTypeLink.classList.remove('active');
            link.classList.add('active');
        }
    
        // Ajouter un gestionnaire d'événement "click" aux liens de sexe
        sexLinks.forEach(link => {
            link.addEventListener('click', function (event) {
                event.preventDefault();
                toggleSexLink(link);
            });
        });
    
        // Ajouter un gestionnaire d'événement "click" aux liens de type d'articles
        typeLinks.forEach(link => {
            link.addEventListener('click', function (event) {
                event.preventDefault();
                toggleTypeLink(link);
            });
        });
    
        // Ajouter un gestionnaire d'événement "click" au lien "Both"
        defaultSexLink.addEventListener('click', function (event) {
            event.preventDefault();
            toggleSexLink(this);
        });
    
        // Ajouter un gestionnaire d'événement "click" au lien "All"
        defaultTypeLink.addEventListener('click', function (event) {
            event.preventDefault();
            toggleTypeLink(this);
        });
    
        // Sélectionner les liens par défaut
        defaultSexLink.classList.add('active');
        defaultTypeLink.classList.add('active');

           // Récupérer tous les liens de partenaire
        const partnerLinks = document.querySelectorAll('.partner-link');
        const defaultPartnerLink = document.querySelector('.default-partner');
        
        // Fonction pour désactiver "All" et activer le partenaire correspondant
        function togglePartnerLink(link) {
            partnerLinks.forEach(link => {
                link.classList.remove('active');
            });
            defaultPartnerLink.classList.remove('active');
            link.classList.add('active');
        }
    
        // Ajouter un gestionnaire d'événement "click" aux liens de partenaire
        partnerLinks.forEach(link => {
            link.addEventListener('click', function (event) {
                event.preventDefault();
                togglePartnerLink(link);
            });
        });
    
        // Ajouter un gestionnaire d'événement "click" au lien "All"
        defaultPartnerLink.addEventListener('click', function (event) {
            event.preventDefault();
            togglePartnerLink(this);
        });
    
        // Sélectionner "All" par défaut
        defaultPartnerLink.classList.add('active');

        // Récupérer tous les liens de taille
        const sizeLinks = document.querySelectorAll('.size-link');
        const defaultSizeLink = document.querySelector('.size-link[data-size="ALL"]');
        
        // Fonction pour désactiver les autres tailles et activer "ALL"
        function toggleSizeLink(link) {
            sizeLinks.forEach(link => {
                link.classList.remove('active');
            });
            link.classList.add('active');
        }
    
        // Ajouter un gestionnaire d'événement "click" aux liens de taille
        sizeLinks.forEach(link => {
            link.addEventListener('click', function (event) {
                event.preventDefault();
                toggleSizeLink(link);
            });
        });
    
        // Sélectionner "ALL" par défaut
        defaultSizeLink.classList.add('active');
    </script>
    

{% endblock %}